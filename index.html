<!DOCTYPE html>
<html>
<head>
    <title>Monkey D. Airlines - Cabin Booking</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0f172a;
            color: white;
            text-align: center;
            margin: 0;
        }

        h1 {
            padding: 20px;
            margin: 0;
            background: #0b3d91;
        }

        .username-box {
            margin: 20px;
        }

        input {
            padding: 8px;
            font-size: 16px;
            border-radius: 6px;
            border: none;
        }

        .section-title {
            margin-top: 30px;
            font-size: 20px;
            font-weight: bold;
        }

        .row {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 15px 0;
        }

        .seat {
            width: 90px;
            height: 60px;
            margin: 0 40px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            position: relative;
        }

        .first { background: gold; color: black; }
        .business { background: royalblue; }
        .economy { background: green; }

        .taken {
            background: crimson !important;
            cursor: not-allowed;
        }

        .username-label {
            font-size: 11px;
            margin-top: 4px;
            background: rgba(0,0,0,0.3);
            padding: 2px 4px;
            border-radius: 4px;
        }

        .aisle {
            width: 60px;
        }

        button {
            margin-top: 30px;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
        }
    </style>
</head>

<body>

<h1>Monkey D. Airlines â€“ Seat Selection</h1>

<div class="username-box">
    <input type="text" id="username" placeholder="Enter your username">
</div>

<div id="plane"></div>

<button onclick="goToAdmin()">Admin Panel</button>


<script>
    const layout = [
        { name: "FIRST CLASS", type: "first", rows: 2 },
        { name: "BUSINESS CLASS", type: "business", rows: 2 },
        { name: "ECONOMY CLASS", type: "economy", rows: 2 }
    ];

    const plane = document.getElementById("plane");
    let bookedSeats = JSON.parse(localStorage.getItem("bookedSeats")) || {};
    let seatNumber = 1;

    layout.forEach(section => {

        const title = document.createElement("div");
        title.className = "section-title";
        title.textContent = section.name;
        plane.appendChild(title);

        for (let r = 0; r < section.rows; r++) {

            const row = document.createElement("div");
            row.className = "row";

            const leftSeat = createSeat(section.type);
            row.appendChild(leftSeat);

            const aisle = document.createElement("div");
            aisle.className = "aisle";
            row.appendChild(aisle);

            const rightSeat = createSeat(section.type);
            row.appendChild(rightSeat);

            plane.appendChild(row);
        }
    });

    function createSeat(type) {
        const seat = document.createElement("div");
        seat.className = "seat " + type;
        const currentSeatNumber = seatNumber;

        const seatText = document.createElement("div");
        seatText.textContent = currentSeatNumber;
        seat.appendChild(seatText);

        if (bookedSeats[currentSeatNumber]) {
            seat.classList.add("taken");

            const label = document.createElement("div");
            label.className = "username-label";
            label.textContent = bookedSeats[currentSeatNumber];
            seat.appendChild(label);

            seat.addEventListener("click", () => {
                alert("Seat " + currentSeatNumber + " is booked by " + bookedSeats[currentSeatNumber]);
            });

        } else {
            seat.addEventListener("click", () => bookSeat(currentSeatNumber));
        }

        seatNumber++;
        return seat;
    }

    function bookSeat(number) {
        const username = document.getElementById("username").value.trim();

        if (!username) {
            alert("Please enter your username first.");
            return;
        }

        if (!bookedSeats[number]) {
            bookedSeats[number] = username;
            localStorage.setItem("bookedSeats", JSON.stringify(bookedSeats));
            location.reload();
        }
    }

    function goToAdmin() {
    window.location.href = "admin.html";

}
</script>

</body>
</html>
